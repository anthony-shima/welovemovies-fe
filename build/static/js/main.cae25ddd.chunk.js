(this["webpackJsonpstarter-movie-front-end"]=this["webpackJsonpstarter-movie-front-end"]||[]).push([[0],{34:function(e,t,s){},35:function(e,t,s){"use strict";s.r(t);var c=s(1),n=s.n(c),r=s(13),i=s.n(r),a=s(5),l=s(0);var o=function(){return Object(l.jsxs)("ul",{className:"nav justify-content-start",style:{padding:"1rem 0 3rem"},children:[Object(l.jsx)("li",{className:"nav-item d-none d-lg-block d-xl-block",children:Object(l.jsx)(a.b,{className:"font-poppins-heading nav-link mx-2 text-light",to:"/",children:Object(l.jsx)("h1",{className:"h5",style:{fontStyle:"italic"},children:"WeLoveMovies"})})}),Object(l.jsx)("li",{className:"nav-item",children:Object(l.jsx)(a.b,{className:"nav-link mx-2 font-weight-light text-light",to:"/movies",children:"All Movies"})}),Object(l.jsx)("li",{className:"nav-item",children:Object(l.jsx)(a.b,{className:"nav-link mx-2 font-weight-light text-light",to:"/theaters",children:"All Theaters"})})]})},j=s.p+"static/media/header.c47d8fe5.jpg";var d=function(){const e={background:`linear-gradient(rgba(0, 0, 0, 0.2), rgba(0, 0, 0, 0.7)), url(${j})`,backgroundPosition:"center",backgroundSize:"100% auto"};return Object(l.jsxs)("div",{className:"jumbotron jumbotron-fluid text-white border-bottom border-dark pt-0",style:e,children:[Object(l.jsx)(o,{}),Object(l.jsxs)("div",{className:"container",children:[Object(l.jsx)("h1",{className:"display-4",children:"Find your next favorite movie!"}),Object(l.jsxs)("p",{className:"lead",children:[Object(l.jsx)("em",{children:"WeLoveMovies"})," is your source for finding reviews of movies in theatres near you."]})]})]})};var h=function(e){let{error:t}=e;return t&&Object(l.jsxs)("div",{className:"alert alert-danger m-2",children:["Error: ",t.message]})};const b=Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_API_URL:"https://welovemovies-15go.onrender.com"}).REACT_APP_API_BASE_URL||"http://localhost:5001",m=new Headers;async function O(e,t,s){try{const s=await fetch(e,t);if(204===s.status)return null;const c=await s.json();return c.error?Promise.reject({message:c.error}):c.data}catch(c){if("AbortError"!==c.name)throw console.error(c.stack),c;return Promise.resolve(s)}}function u(e){return async t=>{const s=`${b}/movies/${t.movie_id}/reviews`;return t.reviews=await O(s,{headers:m,signal:e},[]),t}}async function x(e){const t=new URL(`${b}/movies?is_showing=true`),s=u(e);return await O(t,{headers:m,signal:e},[]).then((e=>Promise.all(e.map(s))))}async function v(e,t){const s=new URL(`${b}/movies/${e}`),c=u(t),n=function(e){return async t=>{const s=`${b}/movies/${t.movie_id}/theaters`;return t.theaters=await O(s,{headers:m,signal:e},[]),t}}(t);return await O(s,{headers:m,signal:t},[]).then(c).then(n)}m.append("Content-Type","application/json");var g=function(){const[e,t]=Object(c.useState)([]),[s,n]=Object(c.useState)(null);Object(c.useEffect)((()=>{n(null);const e=new AbortController;return x(e.signal).then(t).catch(n),()=>e.abort()}),[]);const r=e.map((e=>Object(l.jsxs)("article",{className:"col-sm-12 col-md-6 col-lg-3 my-2",children:[Object(l.jsx)("img",{alt:`${e.title} Poster`,className:"rounded",src:e.image_url,style:{width:"100%"}}),Object(l.jsx)(a.b,{to:`/movies/${e.movie_id}`,className:"stretched-link text-dark",children:Object(l.jsx)("h3",{className:"font-poppins-heading text-center mt-2",children:e.title})})]},e.movie_id)));return Object(l.jsxs)("main",{className:"container",children:[Object(l.jsx)(h,{error:s}),Object(l.jsx)("h2",{className:"font-poppins",children:"Now Showing"}),Object(l.jsx)("hr",{}),Object(l.jsx)("section",{className:"row",children:r})]})};function p(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];if(e.length){const t=e.reduce(((e,t)=>e+t.score),0);return Math.round(t/e.length)}return"N/A"}var w=function(e){let{reviews:t=[]}=e;return Object(l.jsxs)("p",{children:[Object(l.jsx)("strong",{children:"Average Review Rating:"})," ",p(t)]})};var f=function(e){let{movie:t}=e;return Object(l.jsxs)("section",{className:"row mt-4",children:[Object(l.jsx)("article",{className:"col-sm-12 col-md-6 col-lg-3",children:Object(l.jsx)("img",{alt:`${t.title} Poster`,className:"rounded",src:t.image_url,style:{width:"100%"}})}),Object(l.jsxs)("aside",{className:"col-sm-12 col-md-6 col-lg-9",children:[Object(l.jsx)("h3",{className:"font-poppins-heading mb-4",children:t.title}),Object(l.jsx)("p",{children:t.description}),Object(l.jsxs)("p",{children:[Object(l.jsx)("strong",{children:"Runtime:"})," ",t.runtime," minutes"]}),Object(l.jsxs)("p",{children:[Object(l.jsx)("strong",{children:"Rating:"})," ",t.rating]}),Object(l.jsx)(w,{reviews:t.reviews}),Object(l.jsx)(a.b,{to:`/movies/${t.movie_id}`,className:"btn btn-primary",children:"See More"})]})]})};var N=function(){const[e,t]=Object(c.useState)([]),[s,n]=Object(c.useState)(null);Object(c.useEffect)((()=>{n(null);const e=new AbortController;return x(e.signal).then(t).catch(n),()=>e.abort()}),[]);const r=e.map((e=>Object(l.jsx)(f,{movie:e},e.movie_id)));return Object(l.jsxs)("main",{className:"container",children:[Object(l.jsx)(h,{error:s}),Object(l.jsx)("h2",{className:"font-poppins",children:"All Movies"}),Object(l.jsx)("hr",{}),Object(l.jsx)("section",{children:r})]})},_=s(2);var y=function(e){let{movie:t}=e;return Object(l.jsxs)("section",{children:[Object(l.jsx)("h3",{className:"font-poppins-heading mb-4",children:t.title}),Object(l.jsx)("p",{children:t.description}),Object(l.jsxs)("p",{children:[Object(l.jsx)("strong",{children:"Runtime:"})," ",t.runtime_in_minutes," minutes"]}),Object(l.jsxs)("p",{children:[Object(l.jsx)("strong",{children:"Rating:"})," ",t.rating]}),Object(l.jsx)(w,{reviews:t.reviews})]})},S=s(15);const R={padding:"0 0px 5px 5px"};var k=function(e){let{review:t,deleteReview:s,setReviewScore:c}=e;const{critic:n}=t;return Object(l.jsxs)("section",{className:"border p-4 mb-4",children:[Object(l.jsxs)("h4",{children:[n.preferred_name," ",n.surname,Object(l.jsxs)("small",{children:[" of ",n.organization_name]})]}),Object(l.jsx)("p",{dangerouslySetInnerHTML:{__html:S.markdown.toHTML(t.content)}}),Object(l.jsxs)("p",{children:[Object(l.jsx)("strong",{children:"Rating:"})," ",t.score,Object(l.jsx)("button",{className:"btn btn-link",style:R,onClick:()=>(()=>{const e=t.score+1;e>5||c(t,e)})(),children:"\u2191"}),Object(l.jsx)("button",{className:"btn btn-link",style:R,onClick:()=>(()=>{const e=t.score-1;e<1||c(t,e)})(),children:"\u2193"})]}),Object(l.jsx)("button",{className:"btn btn-danger",onClick:()=>s(t),children:"Destroy Review"})]})};var A=function(e){let{reviews:t=[],deleteReview:s,setReviewScore:c}=e;if(t.length){const e=t.sort(((e,t)=>e.critic.preferred_name.localeCompare(t.critic.preferred_name))).map((e=>Object(l.jsx)(k,{review:e,deleteReview:s,setReviewScore:c},e.review_id)));return Object(l.jsxs)("section",{className:"mt-4",children:[Object(l.jsx)("h3",{children:"Reviews"}),e]})}return null};var E=function(e){let{theater:t}=e;return Object(l.jsx)("article",{className:"col-sm-12 col-md",children:Object(l.jsx)("div",{className:"card",children:Object(l.jsxs)("div",{className:"card-body",children:[Object(l.jsx)("h5",{children:t.name}),Object(l.jsxs)("address",{children:[t.address_line_1,Object(l.jsx)("br",{}),t.address_line_2?t.address_line_2:null,t.city,", ",t.state," ",t.zip]})]})})})};var $=function(e){let{theaters:t=[]}=e;return t.length?Object(l.jsxs)("section",{className:"mt-4",children:[Object(l.jsx)("h4",{children:"Now Showing Here"}),Object(l.jsx)("div",{className:"row",children:t.map((e=>Object(l.jsx)(E,{theater:e},e.theater_id)))})]}):null};var P=function(){const{movieId:e}=Object(_.f)(),[t,s]=Object(c.useState)({}),[n,r]=Object(c.useState)(null);function i(e){r(null);const t=new AbortController;return v(e,t.signal).then(s).catch(r),()=>t.abort()}return Object(c.useEffect)((()=>{i(e)}),[e]),Object(l.jsxs)("div",{className:"container",children:[Object(l.jsx)(h,{error:n}),Object(l.jsxs)("section",{className:"row mt-4",children:[Object(l.jsx)("article",{className:"col-sm-12 col-md-6 col-lg-3",children:Object(l.jsx)("img",{alt:`${t.title} Poster`,className:"rounded",src:t.image_url,style:{width:"100%"}})}),Object(l.jsxs)("aside",{className:"col-sm-12 col-md-6 col-lg-9",children:[Object(l.jsx)(y,{movie:t}),Object(l.jsx)($,{theaters:t.theaters}),Object(l.jsx)(A,{reviews:t.reviews,deleteReview:function(e){let{movie_id:t,review_id:s}=e;(async function(e){const t=`${b}/reviews/${e}`;return await O(t,{method:"DELETE",headers:m},{})})(s).then((()=>i(t)))},setReviewScore:function(e,t){let{movie_id:s,review_id:c}=e;console.log("score",c,t),async function(e,t){const s=`${b}/reviews/${e}`,c={method:"PUT",headers:m,body:JSON.stringify({data:t})};return await O(s,c,{})}(c,{score:t}).then((()=>i(s)))}})]})]})]})};var T=function(e){let{theater:t}=e;return Object(l.jsx)("article",{className:"col-12 mb-4",children:Object(l.jsxs)("div",{className:"row",children:[Object(l.jsxs)("aside",{className:"col",children:[Object(l.jsx)("h2",{children:t.name}),Object(l.jsxs)("address",{children:[t.address_line_1,Object(l.jsx)("br",{}),t.address_line_2?t.address_line_2:null,t.city,", ",t.state," ",t.zip]})]}),Object(l.jsx)("section",{className:"col",children:Object(l.jsx)("div",{className:"row",children:t.movies.map((e=>Object(l.jsx)("div",{className:"col-2",children:Object(l.jsx)(a.b,{to:`/movies/${e.movie_id}`,children:Object(l.jsx)("img",{alt:`${e.title} Poster`,src:e.image_url,className:"w-100"})})},e.movie_id)))})})]})})};var C=function(){const[e,t]=Object(c.useState)([]),[s,n]=Object(c.useState)(null);Object(c.useEffect)((()=>{n(null);const e=new AbortController;return async function(e){const t=new URL(`${b}/theaters`);return await O(t,{headers:m,signal:e},[])}(e.signal).then(t).catch(n),()=>e.abort()}),[]);const r=e.map((e=>Object(l.jsx)(T,{theater:e},e.theater_id)));return Object(l.jsxs)("main",{className:"container",children:[Object(l.jsx)(h,{error:s}),Object(l.jsx)("h2",{className:"font-poppins",children:"All Theaters"}),Object(l.jsx)("hr",{}),Object(l.jsx)("section",{className:"row",children:r})]})};var L=function(){return Object(l.jsxs)(a.a,{children:[Object(l.jsx)(d,{}),Object(l.jsxs)(_.c,{children:[Object(l.jsx)(_.a,{exact:!0,path:"/",children:Object(l.jsx)(g,{})}),Object(l.jsx)(_.a,{exact:!0,path:"/movies",children:Object(l.jsx)(N,{})}),Object(l.jsx)(_.a,{exact:!0,path:"/movies/:movieId",children:Object(l.jsx)(P,{})}),Object(l.jsx)(_.a,{exact:!0,path:"/theaters",children:Object(l.jsx)(C,{})})]})]})};s(34);i.a.render(Object(l.jsx)(n.a.StrictMode,{children:Object(l.jsx)(L,{})}),document.getElementById("root"))}},[[35,1,2]]]);
//# sourceMappingURL=main.cae25ddd.chunk.js.map